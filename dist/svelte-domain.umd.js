(function(o,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(o=typeof globalThis<"u"?globalThis:o||self,o["svelte-domain"]=u())})(this,function(){"use strict";function o(){}function u(f,n=o){let t;const s=new Set;function r(e,i){return e!=e?i==i:e!==i||e&&typeof e=="object"||typeof e=="function"}function c(e){if(r(f.state,e)&&(f.state=e,t)){for(const i of s)i[1]();for(const i of s)i[0]({state:e})}}function b(e,i=o){const a=[e,i];return s.add(a),s.size===1&&(t=n(c)||o),e({state:f.state}),()=>{s.delete(a),s.size===0&&(t==null||t(),t=null)}}return Object.assign(f,{set:c},{subscribe:b})}function d(f){let n={};return Object.keys(f).forEach(t=>{n[t]={state:f[t].state,...f[t].reducers,...f[t].effects}}),Object.keys(n).forEach(t=>{n[t]=u(n[t])}),Object.keys(f).forEach(t=>{let s=f[t].reducers;s!==void 0&&Object.keys(s).forEach(c=>{n[t][c]=function(b){if(s!=null){const e=s[c](n[t].state,b);return n[t].set(e),e}return n[t].state}});let r=f[t].effects;r!==void 0&&Object.keys(r).forEach(c=>{n[t][c]=function(b){if(r!=null)return r[c](n,b)}})}),n}return d});
