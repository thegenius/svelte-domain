(function(o,r){typeof exports=="object"&&typeof module<"u"?module.exports=r():typeof define=="function"&&define.amd?define(r):(o=typeof globalThis<"u"?globalThis:o||self,o["svelte-domain"]=r())})(this,function(){"use strict";function o(){}function r(n,s=o){let t;const f=new Set;function u(e,c){return e!=e?c==c:e!==c||e&&typeof e=="object"||typeof e=="function"}function i(e){if(u(n.state,e)&&(n.state=e,t)){for(const c of f)c[1]();for(const c of f)c[0]({state:e})}}function b(e,c=o){const a=[e,c];return f.add(a),f.size===1&&(t=s(i)||o),e({state:n.state}),()=>{f.delete(a),f.size===0&&(t==null||t(),t=null)}}return Object.assign(n,{set:i},{subscribe:b})}function d(n){let s={};return Object.keys(n).forEach(t=>{s[t]={state:n[t].state,...n[t].reducers,...n[t].effects}}),Object.keys(s).forEach(t=>{s[t]=r(s[t])}),Object.keys(n).forEach(t=>{let f=n[t].reducers;f!==void 0&&Object.keys(f).forEach(i=>{s[t][i]=function(b){const e=f[i](s[t].state,b);return s[t].set(e),e}});let u=n[t].effects;u!==void 0&&Object.keys(u).forEach(i=>{s[t][i]=function(b){return u[i](s,b)}})}),s}return d});
